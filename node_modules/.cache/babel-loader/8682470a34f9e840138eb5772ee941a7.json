{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chepond/Desktop/react_app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chepond/Desktop/react_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/chepond/Desktop/react_app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/chepond/Desktop/react_app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/chepond/Desktop/react_app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/chepond/Desktop/react_app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/chepond/Desktop/react_app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import{Card}from'react-bootstrap';import'./main.css';var instagramTitleRegExp=new RegExp(/<title>\\n*(.*)\\(@gin_faceid.hk\\) • Instagram photos and videos\\n*<\\/title>/);var instagramRegExp=new RegExp(/<script type=\"text\\/javascript\">window\\._sharedData = (.*)<\\/script>/);var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);function Main(){var _getPrototypeOf2;var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Main)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={photos:[],title:\"\"};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return this.fetchInstagramPhotos('https://www.instagram.com/gin_faceid.hk/');case 3:result=_context.sent;console.log(result.title);this.setState({photos:result.photos,title:result.title});// Do something with the photos\n_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error('Fetching Instagram photos failed',_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,this,[[0,8]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"fetchInstagramPhotos\",value:function(){var _fetchInstagramPhotos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(accountUrl){var response,title,data,json,edges,photos;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(accountUrl);case 2:response=_context2.sent;title=response.data.match(instagramTitleRegExp)[1];console.log(title);data=response.data.match(instagramRegExp)[1];data=data.substring(0,data.length-1);json=JSON.parse(data);edges=json.entry_data.ProfilePage[0].graphql.user.edge_owner_to_timeline_media.edges.splice(0,8);photos=edges.map(function(_ref){var node=_ref.node;return{url:\"https://www.instagram.com/p/\".concat(node.shortcode,\"/\"),thumbnailUrl:node.thumbnail_src,displayUrl:node.display_url,caption:node.edge_media_to_caption.edges[0].node.text};});// photos.forEach(x=>console.log(x.caption.replace(/(\\r\\n|\\n|\\r)/gm, '\\n')))\n// console.log(photos);\nreturn _context2.abrupt(\"return\",{title:title,photos:photos});case 11:case\"end\":return _context2.stop();}}},_callee2);}));function fetchInstagramPhotos(_x){return _fetchInstagramPhotos.apply(this,arguments);}return fetchInstagramPhotos;}()},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"legend\",{align:\"center\",style:{color:\"#9A8873\"}},this.state.title),React.createElement(\"br\",null),this.state.photos.map(function(photo){return React.createElement(\"div\",null,React.createElement(Card,null,React.createElement(Card.Img,{variant:\"top\",src:photo.displayUrl})),photo.caption.split(/(\\r\\n|\\n|\\r)/gm).map(function(i,key){return React.createElement(\"div\",{key:key},i);}));}));}}]);return Main;}(React.Component);export{Main as default};","map":{"version":3,"sources":["/Users/chepond/Desktop/react_app/src/pages/main.js"],"names":["React","axios","Card","instagramTitleRegExp","RegExp","instagramRegExp","Main","state","photos","title","fetchInstagramPhotos","result","console","log","setState","error","accountUrl","get","response","data","match","substring","length","json","JSON","parse","edges","entry_data","ProfilePage","graphql","user","edge_owner_to_timeline_media","splice","map","node","url","shortcode","thumbnailUrl","thumbnail_src","displayUrl","display_url","caption","edge_media_to_caption","text","color","photo","split","i","key","Component"],"mappings":"gzBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,iBAArB,CACA,MAAO,YAAP,CAEA,GAAMC,CAAAA,oBAAoB,CAAG,GAAIC,CAAAA,MAAJ,CAAW,4EAAX,CAA7B,CACA,GAAMC,CAAAA,eAAe,CAAG,GAAID,CAAAA,MAAJ,CAAW,sEAAX,CAAxB,C,GACqBE,CAAAA,I,mYAEjBC,K,CAAQ,CACJC,MAAM,CAAE,EADJ,CAEJC,KAAK,CAAE,EAFH,C,+UAOqB,MAAKC,oBAAL,CAA0B,0CAA1B,C,QAAfC,M,eACNC,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACF,KAAnB,EACA,KAAKK,QAAL,CAAc,CACVN,MAAM,CAAEG,MAAM,CAACH,MADL,CAEVC,KAAK,CAAEE,MAAM,CAACF,KAFJ,CAAd,EAIA;+EAEAG,OAAO,CAACG,KAAR,CAAc,kCAAd,c,oUAImBC,U,uLACAf,CAAAA,KAAK,CAACgB,GAAN,CAAUD,UAAV,C,QAAjBE,Q,gBACFT,K,CAAQS,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBjB,oBAApB,EAA0C,CAA1C,C,CACZS,OAAO,CAACC,GAAR,CAAYJ,KAAZ,EACIU,I,CAAOD,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBf,eAApB,EAAqC,CAArC,C,CACXc,IAAI,CAAGA,IAAI,CAACE,SAAL,CAAe,CAAf,CAAkBF,IAAI,CAACG,MAAL,CAAc,CAAhC,CAAP,CACMC,I,CAAOC,IAAI,CAACC,KAAL,CAAWN,IAAX,C,CACPO,K,CAAQH,IAAI,CAACI,UAAL,CAAgBC,WAAhB,CAA4B,CAA5B,EAA+BC,OAA/B,CAAuCC,IAAvC,CAA4CC,4BAA5C,CAAyEL,KAAzE,CAA+EM,MAA/E,CAAsF,CAAtF,CAAyF,CAAzF,C,CACRxB,M,CAASkB,KAAK,CAACO,GAAN,CAAU,cAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CACnC,MAAO,CACHC,GAAG,uCAAiCD,IAAI,CAACE,SAAtC,KADA,CAEHC,YAAY,CAAEH,IAAI,CAACI,aAFhB,CAGHC,UAAU,CAAEL,IAAI,CAACM,WAHd,CAIHC,OAAO,CAAEP,IAAI,CAACQ,qBAAL,CAA2BhB,KAA3B,CAAiC,CAAjC,EAAoCQ,IAApC,CAAyCS,IAJ/C,CAAP,CAMH,CAPc,C,CAQf;AACA;iCACO,CAAElC,KAAK,CAALA,KAAF,CAASD,MAAM,CAANA,MAAT,C,0NAGF,CACL,MAAO,gCACH,8BADG,CAEH,8BAFG,CAGH,8BAAQ,KAAK,CAAC,QAAd,CAAuB,KAAK,CAAE,CAACoC,KAAK,CAAE,SAAR,CAA9B,EAAmD,KAAKrC,KAAL,CAAWE,KAA9D,CAHG,CAIH,8BAJG,CAKF,KAAKF,KAAL,CAAWC,MAAX,CAAkByB,GAAlB,CAAsB,SAAAY,KAAK,CAAI,CAC5B,MAAO,gCAAK,oBAAC,IAAD,MACR,oBAAC,IAAD,CAAM,GAAN,EAAU,OAAO,CAAC,KAAlB,CAAwB,GAAG,CAAEA,KAAK,CAACN,UAAnC,EADQ,CAAL,CAIFM,KAAK,CAACJ,OAAN,CAAcK,KAAd,CAAoB,gBAApB,EAAsCb,GAAtC,CAA0C,SAACc,CAAD,CAAIC,GAAJ,CAAY,CACnD,MAAO,4BAAK,GAAG,CAAEA,GAAV,EAAgBD,CAAhB,CAAP,CACH,CAFA,CAJE,CAAP,CAQH,CATA,CALE,CAAP,CAgBH,C,kBA3D6B/C,KAAK,CAACiD,S,SAAnB3C,I","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { Card } from 'react-bootstrap';\nimport './main.css';\n\nconst instagramTitleRegExp = new RegExp(/<title>\\n*(.*)\\(@gin_faceid.hk\\) • Instagram photos and videos\\n*<\\/title>/)\nconst instagramRegExp = new RegExp(/<script type=\"text\\/javascript\">window\\._sharedData = (.*)<\\/script>/);\nexport default class Main extends React.Component {\n\n    state = {\n        photos: [],\n        title: \"\"\n    }\n\n    async componentDidMount() {\n        try {\n            const result = await this.fetchInstagramPhotos('https://www.instagram.com/gin_faceid.hk/')\n            console.log(result.title)\n            this.setState({\n                photos: result.photos,\n                title: result.title\n            })\n            // Do something with the photos\n        } catch (e) {\n            console.error('Fetching Instagram photos failed', e)\n        }\n    }\n\n    async fetchInstagramPhotos(accountUrl) {\n        const response = await axios.get(accountUrl)\n        var title = response.data.match(instagramTitleRegExp)[1]\n        console.log(title)\n        var data = response.data.match(instagramRegExp)[1];\n        data = data.substring(0, data.length - 1);\n        const json = JSON.parse(data)\n        const edges = json.entry_data.ProfilePage[0].graphql.user.edge_owner_to_timeline_media.edges.splice(0, 8)\n        const photos = edges.map(({ node }) => {\n            return {\n                url: `https://www.instagram.com/p/${node.shortcode}/`,\n                thumbnailUrl: node.thumbnail_src,\n                displayUrl: node.display_url,\n                caption: node.edge_media_to_caption.edges[0].node.text\n            }\n        })\n        // photos.forEach(x=>console.log(x.caption.replace(/(\\r\\n|\\n|\\r)/gm, '\\n')))\n        // console.log(photos);\n        return { title, photos }\n    }\n\n    render() {\n        return <div>\n            <br />\n            <br />\n            <legend align=\"center\" style={{color: \"#9A8873\"}}>{this.state.title}</legend>\n            <br />\n            {this.state.photos.map(photo => {\n                return <div><Card >\n                    <Card.Img variant=\"top\" src={photo.displayUrl} />\n\n                </Card>\n                    {photo.caption.split(/(\\r\\n|\\n|\\r)/gm).map((i, key) => {\n                        return <div key={key}>{i}</div>\n                    })}</div>\n\n            })}\n        </div>\n    }\n}"]},"metadata":{},"sourceType":"module"}